E-COMMERCE CLOTHING WEBSITE - ENTITY RELATIONSHIP DIAGRAM (ERD)

┌─────────────────┐        ┌─────────────────┐
│     USERS       │        │   ADDRESSES     │
├─────────────────┤        ├─────────────────┤
│ id (PK)         │───┐    │ id (PK)         │
│ username        │   │    │ user_id (FK)    │
│ email           │   │    │ recipient_name  │
│ password        │   │    │ phone           │
│ first_name      │   │    │ address_line1   │
│ last_name       │   │    │ address_line2   │
│ phone           │   │    │ city            │
│ avatar_url      │   │    │ state           │
│ date_of_birth   │   │    │ country         │
│ gender          │   │    │ postal_code     │
│ is_active       │   │    │ is_default      │
│ is_verified     │   │    │ created_at      │
│ created_at      │   │    │ updated_at      │
│ updated_at      │   │    └─────────────────┘
└─────────────────┘   │
                      │
                      │ 1:M
                      │
                      │    ┌─────────────────┐
                      │    │    ORDERS       │
                      │    ├─────────────────┤
                      │    │ id (PK)         │
                      │    │ order_number    │
                      │    │ user_id (FK)    │
                      │    │ status          │
                      │    │ payment_status  │
                      │    │ payment_method  │
                      │    │ subtotal        │
                      │    │ shipping_fee    │
                      │    │ tax_amount      │
                      │    │ discount_amount │
                      │    │ total_amount    │
                      │    │ currency        │
                      │    │ shipping_addr_id│
                      │    │ billing_addr_id │
                      │    │ notes           │
                      │    │ created_at      │
                      │    │ updated_at      │
                      │    └─────────────────┘
                      │          │
                      │          │
                      │        M:1
                      │          │
                      │    ┌─────────────────┐
                      └────│  ORDER_ITEMS    │
                           ├─────────────────┤
                           │ id (PK)         │
                           │ order_id (FK)   │
                           │ product_id (FK) │
                           │ product_name    │
                           │ product_price   │
                           │ quantity        │
                           │ total_price     │
                           │ created_at      │
                           └─────────────────┘
                                 │
                                 │
                               M:1
                                 │
                    ┌─────────────────────────────┐
                    │        PRODUCTS           │
                    ├───────────────────────────┤
                    │ id (PK)                   │
                    │ name                      │
                    │ slug                      │
                    │ description               │
                    │ short_description         │
                    │ price                     │
                    │ sale_price                │
                    │ sku                       │
                    │ stock_quantity            │
                    │ reserved_quantity         │
                    │ sold_quantity             │
                    │ category_id (FK)          │
                    │ brand                     │
                    │ weight                    │
                    │ dimensions                │
                    │ color                     │
                    │ size                      │
                    │ material                  │
                    │ care_instructions         │
                    │ is_active                 │
                    │ is_featured               │
                    │ is_new                    │
                    │ created_at                │
                    │ updated_at                │
                    └───────────────────────────┘
                              │
                              │
                            M:1
                              │
                    ┌─────────────────────────────┐
                    │      CATEGORIES           │
                    ├───────────────────────────┤
                    │ id (PK)                   │
                    │ name                      │
                    │ slug                      │
                    │ description               │
                    │ image_url                 │
                    │ parent_category_id (FK)   │
                    │ is_active                 │
                    │ created_at                │
                    │ updated_at                │
                    └───────────────────────────┘
                              │
                              │
                            M:1 (self-referencing)
                              │
                    ┌─────────────────────────────┐
                    │      CATEGORIES           │ (parent_category_id)
                    └─────────────────────────────┘

┌─────────────────┐        ┌─────────────────┐
│  PRODUCT_IMAGES │        │   REVIEWS       │
├─────────────────┤        ├─────────────────┤
│ id (PK)         │        │ id (PK)         │
│ product_id (FK) │        │ product_id (FK) │
│ image_url       │        │ user_id (FK)    │
│ alt_text        │        │ order_id (FK)   │
│ is_primary      │        │ rating          │
│ sort_order      │        │ title           │
│ created_at      │        │ comment         │
│                 │        │ is_verified_pur │
│                 │        │ helpful_count   │
│                 │        │ is_approved     │
│                 │        │ created_at      │
│                 │        │ updated_at      │
└─────────────────┘        └─────────────────┘
         │                           │
         │                           │
       M:1                         M:1
         │                           │
┌─────────────────┐        ┌─────────────────┐
│    PRODUCTS     │        │     USERS       │
└─────────────────┘        └─────────────────┘

┌─────────────────┐        ┌─────────────────┐
│   CART_ITEMS    │        │   WISHLIST      │
├─────────────────┤        ├─────────────────┤
│ id (PK)         │        │ id (PK)         │
│ user_id (FK)    │        │ user_id (FK)    │
│ product_id (FK) │        │ product_id (FK) │
│ quantity        │        │ created_at      │
│ created_at      │        └─────────────────┘
│ updated_at      │                │
└─────────────────┘                │
         │                           │
       M:1                         M:1
         │                           │
┌─────────────────┐        ┌─────────────────┐
│     USERS       │        │    PRODUCTS     │
└─────────────────┘        └─────────────────┘

┌─────────────────┐        ┌─────────────────┐
│    PAYMENTS     │        │    COUPONS      │
├─────────────────┤        ├─────────────────┤
│ id (PK)         │        │ id (PK)         │
│ order_id (FK)   │        │ code            │
│ payment_method  │        │ name            │
│ transaction_id  │        │ description     │
│ amount          │        │ discount_type   │
│ currency        │        │ discount_value  │
│ status          │        │ min_order_amount│
│ payment_gateway │        │ max_discount_amt│
│ payment_date    │        │ usage_limit     │
│ created_at      │        │ used_count      │
│ updated_at      │        │ start_date      │
└─────────────────┘        │ end_date        │
         │                 │ is_active       │
         │                 │ created_at      │
       M:1                 │ updated_at      │
         │                 └─────────────────┘
         │
┌─────────────────┐
│    ORDERS       │
└─────────────────┘

┌─────────────────┐        ┌─────────────────┐
│ COUPON_USAGES   │        │ PROD_VARIANTS   │
├─────────────────┤        ├─────────────────┤
│ id (PK)         │        │ id (PK)         │
│ coupon_id (FK)  │        │ product_id (FK) │
│ order_id (FK)   │        │ sku             │
│ user_id (FK)    │        │ name            │
│ discount_amount │        │ price           │
│ created_at      │        │ stock_quantity  │
└─────────────────┘        │ is_active       │
         │                 │ created_at      │
       M:1                 │ updated_at      │
         │                 └─────────────────┘
         │                         │
         │                       M:1
         │                         │
┌─────────────────┐        ┌─────────────────┐
│    COUPONS      │        │    PRODUCTS     │
└─────────────────┘        └─────────────────┘

┌─────────────────────────┐
│ PRODUCT_ATTRIBUTES      │
├─────────────────────────┤
│ id (PK)                 │
│ name                    │
│ display_name            │
│ attribute_type          │
│ is_filterable           │
│ is_required             │
│ sort_order              │
│ created_at              │
└─────────────────────────┘
         │
       M:1
         │
┌─────────────────────────┐
│ PROD_ATTR_VALUES        │
├─────────────────────────┤
│ id (PK)                 │
│ attribute_id (FK)       │
│ value                   │
│ sort_order              │
│ created_at              │
└─────────────────────────┘
         │
       M:1
         │
┌─────────────────────────┐
│ PROD_ATTR_MAPPINGS      │
├─────────────────────────┤
│ id (PK)                 │
│ product_id (FK)         │
│ attribute_id (FK)       │
│ attribute_value_id (FK) │
│ text_value              │
│ numeric_value           │
│ created_at              │
└─────────────────────────┘
         │
       M:1
         │
┌─────────────────┐
│    PRODUCTS     │
└─────────────────┘

RELATIONSHIP SUMMARY:

1. USERS 1:M ORDERS (A user can place many orders)
2. USERS 1:M ADDRESSES (A user can have many addresses)
3. USERS 1:M REVIEWS (A user can write many reviews)
4. USERS 1:M CART_ITEMS (A user can have many cart items)
5. USERS 1:M WISHLIST (A user can wishlist many products)
6. USERS 1:M COUPON_USAGES (A user can use many coupons)

7. ADDRESSES M:1 USERS (An address belongs to one user)
8. ADDRESSES 1:M ORDERS (An address can be used in many orders as shipping/billing)

9. ORDERS 1:M ORDER_ITEMS (An order can have many items)
10. ORDERS 1:M PAYMENTS (An order can have many payments)
11. ORDERS 1:M COUPON_USAGES (An order can use many coupons)
12. ORDERS M:1 USERS (An order belongs to one user)

13. ORDER_ITEMS M:1 ORDERS (An order item belongs to one order)
14. ORDER_ITEMS M:1 PRODUCTS (An order item refers to one product)

15. PRODUCTS 1:M ORDER_ITEMS (A product can be in many order items)
16. PRODUCTS 1:M PRODUCT_IMAGES (A product can have many images)
17. PRODUCTS 1:M REVIEWS (A product can have many reviews)
18. PRODUCTS 1:M CART_ITEMS (A product can be in many cart items)
19. PRODUCTS 1:M WISHLIST (A product can be in many wishlists)
20. PRODUCTS 1:M PROD_VARIANTS (A product can have many variants)
21. PRODUCTS 1:M PROD_ATTR_MAPPINGS (A product can have many attribute mappings)

22. CATEGORIES 1:M PRODUCTS (A category can have many products)
23. CATEGORIES 1:M CATEGORIES (Self-referencing for subcategories)

24. PAYMENTS M:1 ORDERS (A payment belongs to one order)

25. COUPONS 1:M COUPON_USAGES (A coupon can be used many times)
26. COUPONS M:1 COUPON_USAGES (A usage record uses one coupon)
27. COUPONS M:1 USERS (A usage record is by one user)

28. REVIEWS M:1 PRODUCTS (A review is for one product)
29. REVIEWS M:1 USERS (A review is by one user)
30. REVIEWS M:1 ORDERS (A review can be linked to one order)

31. PROD_ATTR_VALUES M:1 PROD_ATTRIBUTES (Values belong to one attribute)
32. PROD_ATTR_MAPPINGS M:1 PROD_ATTRIBUTES (Mappings refer to one attribute)
33. PROD_ATTR_MAPPINGS M:1 PROD_ATTR_VALUES (Mappings refer to one value)